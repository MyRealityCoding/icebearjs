function initJQuery(){if(typeof jQuery==="undefined"){if(!jQueryScriptOutputted){jQueryScriptOutputted=true;document.write('<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>')}}}var jQueryScriptOutputted=false;initJQuery();(function(e){e.fn.extend({icebearProgress:function(t){var n={datasource:"meta.xml",animated:true,animationType:"easeOutBounce",duration:1e3,onLeavePhase:function(e){},onEnterPhase:function(e){},internalCss:true};t=e.extend(true,{},n,t);htmlTarget=e(this);animatedParts=0;e.when(e.ajax({type:"GET",url:t.datasource,dataType:"xml",success:function(n){e(n).find("resources").children().each(function(){var n=this.tagName;var r=new Array;if(n!=="phaselist"){t[n]=e(this).text()}else{e(this).find("phase").each(function(){r.push(e(this).text())});t.phaselist=r}})}})).done(function(){function n(e,t,n,r){e.append('<div class="cell '+r+'"><div class="caption">'+t+"</div></div>");element=e.find(".cell").last();element.css({display:"table-cell",textAlign:"center"});element.progressbar({value:n})}function r(e,n){target=e[n];animationType="linear";element=target.element;duration=t.duration/animatedParts;if(element.parent().hasClass("current")){animationType=t.animationType}t.onEnterPhase(element.parent());element.animate({width:target.width},duration,animationType,function(){if(element.width()>0&&!element.parent().hasClass("current")){t.onLeavePhase(element.parent())}if(++n<animatedParts){r(e,n)}})}function i(){if(t.animated){data=new Array;index=0;oldHeight=e(".ui-progressbar-value").height();e(".ui-progressbar-value").each(function(){var t=e(this).width();t-=parseInt(e(this).css("marginRight"));data[index++]={element:e(this),width:t};e(this).width(0);e(this).css("height",oldHeight)});r(data,0)}}function s(n){if(t.internalCss){n.find(".cell").css({textAlign:"center"});n.find(".ui-progressbar").css({height:"1em",textAlign:"center"}).find(".ui-progressbar-value").css({height:"100%",display:"block"});element=n.find(".cell");element.each(function(){caption=e(this).find(".caption");progress=e(this).find(".ui-progressbar-value");caption.css({marginBottom:-e(this).height()});newHeight=caption.height()+parseInt(caption.css("paddingTop"))+parseInt(caption.css("paddingBottom"));e(this).parent().height(newHeight);progress.height(newHeight);caption.resize(function(){s()});e(this).resize(function(){s()})})}}function o(e){e.css({display:"table",width:"100%",tableLayout:"fixed"});row=e.html("<div></div>").find("div");row.css("display","table-row");var r=false;animatedParts=0;for(var i=0;i<t.phaselist.length;++i){element=t.phaselist[i];var s=100;var o="reached";if(element===t.phase){s=parseInt(t.progress);r=true;o="current";animatedParts++}else if(r){s=0;o="open"}else{animatedParts++}if(i===0){o+=" first"}else if(i===t.phaselist.length-1){o+=" last"}row.html(n(row,element,s,o))}}if(t.length===null){htmlTarget.html(datasource+" not found.");return htmlTarget}else if(t.phaselist===null){htmlTarget.html(datasource+" does not provide any phaselist");return htmlTarget}o(htmlTarget);s(htmlTarget);i();e(window).resize(function(){htmlTarget.empty();o(htmlTarget);s(htmlTarget);i()});return htmlTarget})}})})(jQuery)